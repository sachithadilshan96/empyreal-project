{% extends 'base.html' %}

{% block title %} | User Dashboard {% endblock %}

{% block content %}
<section id="showcase-inner" class="py-5 text-white">
    <div class="container">
      <div class="row text-center">
        <div class="col-md-12">
          <br>
          <br>
          <br>
          <br>
          <hr>
          <h1 class="display-6">User Dashboard</h1>
          <p class="lead">Manage your  Real Estate account</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Breadcrumb -->
  <section id="bc" class="mt-3">
    <div class="container">
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item">
            <a href="{% url 'index' %}">
              <i class="fas fa-home"></i> Home</a>
          </li>
          <li class="breadcrumb-item active"> Dashboard</li>
        </ol>
      </nav>
    </div>
  </section>

  <!-- Alerts -->
  {% include 'partials/_alerts.html' %}

  <section id="dashboard" class="py-4">
    <div class="container">
      <div class="row">
        <div class="col-md-12">

            <h2><i class="fas fa-user-tie"></i>&nbsp;&nbsp; {{ user.username }} {{ count }}</h2>
            <p>Here are the property listings that you have created</p>
            {% if user_listing %}
            <table class="table">
              <thead>
                <tr>
                  <th scope="col">#id</th>
                  <th scope="col">Posted Date</th>
                  <th scope="col">Title</th>
                  <th scope="col">Realtor</th>
                  <th scope="col">Verification</th>
                  <th scope="col">Status</th>
                  <th></th>
                  <th></th>

                </tr>
              </thead>
              <tbody>
                {% for listing in user_listing %}
                  <tr>
                    <td>{{ listing.id }}</td>
                    <td>{{ listing.list_date|date:"d/n/Y"  }}</td>
                    <td><a  href="{% url 'listing' listing.id %}">{{ listing.title }}</a></td>
                    <td>{{ listing.realtor }}</td>
                    <td>{{ listing.is_verified|yesno:"Verifed,Not Verifed"  }}</td>
                    <td>{{ listing.is_published|yesno:"Published,Not Published"  }}</td>
                    <td>
                      <form method="GET" action="{% url 'editlisting' listing.id %}">
                        {% csrf_token %}

                      <button class="btn-sm btn-primary-outline-primary py-0" style="font-size: 0.8em"  >Edit</button>
                      </form>

                    </td>
                    <td>
                      <form method="POST" action="{% url 'deletelistings' listing.id  %}">
                        {% csrf_token %}

                      <button class="btn-sm btn-primary-outline-primary py-0" style="font-size: 0.8em"type="submit" >delete</button>
                      </form>
                    </td>


                  </tr>
                {% endfor %}
              </tbody>
            </table>
          {% else %}

          {% endif %}
        </div>
      </div>
    </div>
  </section>

  {% endblock %}
